{"ast":null,"code":"var _jsxFileName = \"/Users/sameer/code/picovoice/product_ratings/src/containers/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport CardList from '../components/CardList';\nimport './App.css';\nimport db from './firebase.config.js';\nimport axios from 'axios';\n\nfunction App() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [data, setData] = useState([]);\n  const [ratings, setRatings] = useState([]);\n  const [searchResults, setSearchResults] = useState([]);\n\n  const handleChange = event => {\n    setSearchTerm(event.target.value);\n  };\n\n  const fetchRatings = async () => {\n    //fetch ratings data from Firebase with hook\n    const response = db.collection('ratings');\n    console.log(\"incomfin response\", response);\n    const data = await response.get();\n    data.docs.forEach(item => {\n      setRatings(ratings => [...ratings, item.data()]);\n    });\n  };\n\n  useEffect(() => {\n    //fetch mock data with hook\n    const fetchData = async () => {\n      const result = await axios('https://jsonplaceholder.typicode.com/users');\n      setData(result.data);\n      setSearchResults(result.data);\n    };\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    fetchRatings();\n    const results = data.filter(robot => robot.name.toLowerCase().includes(searchTerm));\n    setSearchResults(results);\n  }, [searchTerm]);\n\n  const postRating = (index, newValue) => {\n    const key = \"rating-\" + index;\n    var obj = {};\n    obj[key] = newValue;\n    db.collection(\"ratings\").doc(\"oEQub6pDG6nK27mizA66\").update(obj).then(function () {\n      console.log(\"Value successfully written!\");\n    }).catch(function (error) {\n      console.error(\"Error writing Value: \", error);\n    });\n  };\n\n  return !data.length && !ratings.length ? /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, \"Loading\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"f1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Product Ratings: Robo Themed\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pa2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"pa3 ba b--green bg-lightest-blue\",\n    type: \"text\",\n    placeholder: \"search robots\",\n    value: searchTerm,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(CardList, {\n    robots: searchResults,\n    ratings: ratings,\n    postRating: postRating,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/sameer/code/picovoice/product_ratings/src/containers/App.js"],"names":["React","useState","useEffect","CardList","db","axios","App","searchTerm","setSearchTerm","data","setData","ratings","setRatings","searchResults","setSearchResults","handleChange","event","target","value","fetchRatings","response","collection","console","log","get","docs","forEach","item","fetchData","result","results","filter","robot","name","toLowerCase","includes","postRating","index","newValue","key","obj","doc","update","then","catch","error","length"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport CardList from '../components/CardList';\nimport './App.css';\nimport db from './firebase.config.js';\nimport axios from 'axios';\n\nfunction App() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [data, setData] = useState([]);\n  const [ratings, setRatings] = useState([]);\n  const [searchResults, setSearchResults] = useState([]);\n  const handleChange = event => {\n    setSearchTerm(event.target.value);\n  };\n\n  const fetchRatings=async()=>{ //fetch ratings data from Firebase with hook\n    const response=db.collection('ratings');\n    console.log(\"incomfin response\", response);\n    const data=await response.get();\n    data.docs.forEach(item=>{\n     setRatings(ratings=> [...ratings,item.data()]);\n    });\n  }\n\n  useEffect(() => { //fetch mock data with hook\n    const fetchData = async () => {\n      const result = await axios(\n        'https://jsonplaceholder.typicode.com/users',\n      ); \n      setData(result.data);\n      setSearchResults(result.data)\n    };\n \n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    fetchRatings();\n    const results = data.filter(robot =>\n      robot.name.toLowerCase().includes(searchTerm)\n    );\n    setSearchResults(results);\n  }, [searchTerm]);\n  \n  const postRating = (index,newValue) => {\n    const key = \"rating-\"+index;\n    var obj = {};\n    obj[key]=newValue;\n    db.collection(\"ratings\")\n      .doc(\"oEQub6pDG6nK27mizA66\")\n      .update(obj)\n      .then(function () {\n        console.log(\"Value successfully written!\",);\n      })\n      .catch(function (error) {\n        console.error(\"Error writing Value: \", error);\n      });\n  }\n\n  return ( (!data.length && !ratings.length) ?\n    <h1>Loading</h1> :\n    <div>\n      <div className='tc'>\n        <h1 className='f1'>Product Ratings: Robo Themed</h1>\n        <div className='pa2'>\n          <input\n            className='pa3 ba b--green bg-lightest-blue'\n            type='text'\n            placeholder='search robots'\n            value={searchTerm}\n            onChange={handleChange}\n          />\n      </div>\n          <CardList robots={searchResults} ratings={ratings} postRating={postRating}/>\n      </div>\n    </div>\n  );\n\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}